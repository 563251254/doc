# 商城交易平台支付接口文档

------
## 1 引言
### 1.1 文档概述

本文件描述平台针对线上支付行业提供的支付解决方案。供内部相关开发和技术支持人员与商户平台服务方技术人员使用。文档分别从交互模式、签名、接口、注意事项等方面详细介绍了平台的工作方式和开发过程，可以帮助开发人员快速入门并掌握开发技能，同时也可以作为日后接口参数以及参数类型的速查手册。

### 1.2 文档概述

供平台开发人员与商户平台服务方技术或业务人员参考和查询。

### 1.3 测试商户

> * 测试商户号1：1001901172244084
> * 测试商户密钥1：8OHi5K9oj33qnQZiVdh2KApJLV28JLHZ
> * 地址：crm.80kapay.com 
 

## 2 数据格式


### 2.1 提交数据

采用HTTP标准的POST协议，为了保证接收方接收数据正确，传输数据必须签名。

### 2.2 数据格式

采用标准json数据格式进行传输，请求返回数据皆为json数据格式。


## 3 数字签名

为了保证数据传输过程中的数据真实性和完整性，我们需要对数据进行数字签名，在接收签名数据之后进行签名校验。
数字签名有两个步骤，先按一定规则拼接要签名的原始串，再选择具体的算法和密钥计算出签名结果。部分失败的结果不签名。


### 3.1 签名原始串


无论是请求还是应答，签名原始串按以下方式组装成字符串：
> * 除 sign 字段外， 所有参数按照字段名的 ascii 码从小到大排序后使用 QueryString 的格式（即key1=value1&key2=value2…）拼接而成，空值不参与签名组串。
> * 签名原始串中，字段名和字段值都采用原始值，不进行URL Encode。
> * 返回的应答或通知消息可能会由于升级增加参数，请验证应答签名时注意允许这种情况。

### 3.2  签名算法

目前暂只支持MD5 签名。
MD5 签名：MD5 是一种摘要生成算法，通过在签名原始串后加上商户通信密钥的内容，进行MD5 运算，形成的摘要字符串即为签名结果。为了方便比较，签名结果统一转换为大写字符。
注意：签名时将字符串转化成字节流时指定的编码字符集应与参数charset 一致。
MD5 签名计算公式： sign = Md5(原字符串&商户密钥).toUpperCase。

